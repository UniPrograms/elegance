USE TDW_PROGETTO;

-- Inserisco un carrello quando un utente viene registrato --
DELIMITER $$
CREATE TRIGGER CREA_CARRELLO_UTENTE AFTER INSERT ON UTENTE FOR EACH ROW
BEGIN
    -- Inserisce un nuovo carrello con l'ID dell'utente e valori predefiniti
   IF NEW.RUOLO != 'ADMIN' THEN
        INSERT INTO CARRELLO (ID_UTENTE) VALUES (NEW.ID);
    END IF;
END $$
DELIMITER ;



-- Inserisco una lista desideri quando un utente viene registrato --
DELIMITER $$
CREATE TRIGGER CREA_LISTA_DESIDERI_UTENTE AFTER INSERT ON UTENTE FOR EACH ROW
BEGIN
    -- Inserisce un nuovo carrello con l'ID dell'utente e valori predefiniti
   IF NEW.RUOLO != 'ADMIN' THEN
        INSERT INTO LISTA_DESIDERI (ID_UTENTE) VALUES (NEW.ID);
    END IF;
END $$
DELIMITER ;


